!function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=r[o]={exports:{}};t[o][0].call(u.exports,function(e){var r=t[o][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e){function t(){var e=document.getElementById("search-container"),t=document.getElementById("photos-container"),s=new r(e);photos=new n(t),s.on("searchReturned",function(e){photos.displaySearchResults(e)}),s.on("searchClicked",function(e){i.update("/search/"+e,{trigger:!0})}),i.route(/search\/(.+)/,function(e){s.search(e.split("/")[1])}),i.start()}var r=e("./searchbar"),n=e("./photos"),i=e("./router");domready=e("domready"),domready(t)},{"./photos":15,"./router":21,"./searchbar":22,domready:7}],2:[function(e,t,r){function n(e){return"[object Array]"===u.call(e)}function i(e,t){var r;if(null===e)r={__proto__:null};else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var n=function(){};n.prototype=e,r=new n,r.__proto__=e}return"undefined"!=typeof t&&Object.defineProperties&&Object.defineProperties(r,t),r}function s(e){return"object"!=typeof e&&"function"!=typeof e||null===e}function o(e){if(s(e))throw new TypeError("Object.keys called on a non-object");var t=[];for(var r in e)c.call(e,r)&&t.push(r);return t}function a(e){if(s(e))throw new TypeError("Object.getOwnPropertyNames called on a non-object");var t=o(e);return r.isArray(e)&&-1===r.indexOf(e,"length")&&t.push("length"),t}function l(e,t){return{value:e[t]}}var u=Object.prototype.toString,c=Object.prototype.hasOwnProperty;r.isArray="function"==typeof Array.isArray?Array.isArray:n,r.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(t===e[r])return r;return-1},r.filter=function(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r},r.forEach=function(e,t,r){if(e.forEach)return e.forEach(t,r);for(var n=0;n<e.length;n++)t.call(r,e[n],n,e)},r.map=function(e,t){if(e.map)return e.map(t);for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=t(e[n],n,e);return r},r.reduce=function(e,t,r){if(e.reduce)return e.reduce(t,r);var n,i=!1;2<arguments.length&&(n=r,i=!0);for(var s=0,o=e.length;o>s;++s)e.hasOwnProperty(s)&&(i?n=t(n,e[s],s,e):(n=e[s],i=!0));return n},r.substr="b"!=="ab".substr(-1)?function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}:function(e,t,r){return e.substr(t,r)},r.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},r.bind=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(t.bind)return t.bind.apply(t,e);var r=e.shift();return function(){t.apply(r,e.concat([Array.prototype.slice.call(arguments)]))}},r.create="function"==typeof Object.create?Object.create:i;var h="function"==typeof Object.keys?Object.keys:o,p="function"==typeof Object.getOwnPropertyNames?Object.getOwnPropertyNames:a;if((new Error).hasOwnProperty("description")){var f=function(e,t){return"[object Error]"===u.call(e)&&(t=r.filter(t,function(e){return"description"!==e&&"number"!==e&&"message"!==e})),t};r.keys=function(e){return f(e,h(e))},r.getOwnPropertyNames=function(e){return f(e,p(e))}}else r.keys=h,r.getOwnPropertyNames=p;if("function"==typeof Object.getOwnPropertyDescriptor)try{Object.getOwnPropertyDescriptor({a:1},"a"),r.getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor}catch(d){r.getOwnPropertyDescriptor=function(e,t){try{return Object.getOwnPropertyDescriptor(e,t)}catch(r){return l(e,t)}}}else r.getOwnPropertyDescriptor=l},{}],3:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var n=e("util");t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!n.isNumber(e)||0>e)throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n.isObject(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(r=this._events[e],n.isUndefined(r))return!1;if(n.isFunction(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),o=1;i>o;o++)s[o-1]=arguments[o];r.apply(this,s)}else if(n.isObject(r)){for(i=arguments.length,s=new Array(i-1),o=1;i>o;o++)s[o-1]=arguments[o];for(a=r.slice(),i=a.length,o=0;i>o;o++)a[o].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var i;if(!n.isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n.isFunction(t.listener)?t.listener:t),this._events[e]?n.isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n.isObject(this._events[e])&&!this._events[e].warned){var i;i=n.isUndefined(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),t.apply(this,arguments)}if(!n.isFunction(t))throw TypeError("listener must be a function");return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,s,o;if(!n.isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,i=-1,r===t||n.isFunction(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n.isObject(r)){for(o=s;o-->0;)if(r[o]===t||r[o].listener&&r[o].listener===t){i=o;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n.isFunction(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n.isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?n.isFunction(e._events[t])?1:e._events[t].length:0}},{util:4}],4:[function(e,t,r){function n(e,t){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),a(n,e,n.depth)}function i(e,t){var r=n.styles[t];return r?"["+n.colors[r][0]+"m"+e+"["+n.colors[r][1]+"m":e}function s(e){return e}function o(e){var t={};return L.forEach(e,function(e){t[e]=!0}),t}function a(e,t,n){if(e.customInspect&&t&&j(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n);return v(i)||(i=a(e,i,n)),i}var s=l(e,t);if(s)return s;var d=L.keys(t),m=o(d);if(e.showHidden&&(d=L.getOwnPropertyNames(t)),0===d.length){if(j(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(_(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(S(t))return u(t)}var y="",b=!1,w=["{","}"];if(f(t)&&(b=!0,w=["[","]"]),j(t)){var x=t.name?": "+t.name:"";y=" [Function"+x+"]"}if(_(t)&&(y=" "+RegExp.prototype.toString.call(t)),E(t)&&(y=" "+Date.prototype.toUTCString.call(t)),S(t)&&(y=" "+u(t)),0===d.length&&(!b||0==t.length))return w[0]+y+w[1];if(0>n)return _(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var O;return O=b?c(e,t,n,m,d):d.map(function(r){return h(e,t,n,m,r,b)}),e.seen.pop(),p(O,y,w)}function l(e,t){if(w(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,r,n,i){for(var s=[],o=0,a=t.length;a>o;++o)C(t,String(o))?s.push(h(e,t,r,n,String(o),!0)):s.push("");return L.forEach(i,function(i){i.match(/^\d+$/)||s.push(h(e,t,r,n,i,!0))}),s}function h(e,t,r,n,i,s){var o,l,u;if(u=L.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?l=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(l=e.stylize("[Setter]","special")),C(n,i)||(o="["+i+"]"),l||(L.indexOf(e.seen,u.value)<0?(l=m(r)?a(e,u.value,null):a(e,u.value,r-1),l.indexOf("\n")>-1&&(l=s?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),w(o)){if(s&&i.match(/^\d+$/))return l;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+l}function p(e,t,r){var n=0,i=L.reduce(e,function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function f(e){return L.isArray(e)}function d(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return null==e}function y(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function w(e){return void 0===e}function _(e){return x(e)&&"[object RegExp]"===k(e)}function x(e){return"object"==typeof e&&e}function E(e){return x(e)&&"[object Date]"===k(e)}function S(e){return x(e)&&"[object Error]"===k(e)}function j(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function H(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.binarySlice}function k(e){return Object.prototype.toString.call(e)}function q(e){return 10>e?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[q(e.getHours()),q(e.getMinutes()),q(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var L=e("_shims"),T=/%[sdj%]/g;r.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,s=i.length,o=String(e).replace(T,function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return e}}),a=i[r];s>r;a=i[++r])o+=m(a)||!x(a)?" "+a:" "+n(a);return o},r.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=f,r.isBoolean=d,r.isNull=m,r.isNullOrUndefined=g,r.isNumber=y,r.isString=v,r.isSymbol=b,r.isUndefined=w,r.isRegExp=_,r.isObject=x,r.isDate=E,r.isError=S,r.isFunction=j,r.isPrimitive=O,r.isBuffer=H;var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",A(),r.format.apply(r,arguments))},r.inherits=function(e,t){e.super_=t,e.prototype=L.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},r._extend=function(e,t){if(!t||!x(t))return e;for(var r=L.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}},{_shims:2}],5:[function(e,t){"use strict";function r(e){e&&this.root(e),this.listenerMap={},this.handle=r.prototype.handle.bind(this)}t.exports=r,r.tagsCaseSensitive=null,r.prototype.root=function(e){var t,r=this.listenerMap;if("string"==typeof e&&(e=document.querySelector(e)),this.rootElement)for(t in r)r.hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,this.captureForType(t));if(!e||!e.addEventListener)return this.rootElement&&delete this.rootElement,this;this.rootElement=e;for(t in r)r.hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,this.captureForType(t));return this},r.prototype.captureForType=function(e){return-1!==["error","blur","focus"].indexOf(e)},r.prototype.on=function(e,t,n,i){var s,o,a,l;if(!e)throw new TypeError("Invalid event type: "+e);if("function"==typeof t&&(n=t,t=null,i=n),void 0===i&&(i=null),"function"!=typeof n)throw new TypeError("Handler must be a type of Function");return s=this.rootElement,o=this.listenerMap,o[e]||(s&&s.addEventListener(e,this.handle,this.captureForType(e)),o[e]=[]),t?/^[a-z]+$/i.test(t)?(null===r.tagsCaseSensitive&&(r.tagsCaseSensitive="i"===document.createElement("i").tagName),l=r.tagsCaseSensitive?t:t.toUpperCase(),a=this.matchesTag):/^#[a-z0-9\-_]+$/i.test(t)?(l=t.slice(1),a=this.matchesId):(l=t,a=this.matches):(l=null,a=this.matchesRoot.bind(this)),o[e].push({selector:t,eventData:i,handler:n,matcher:a,matcherParam:l}),this},r.prototype.off=function(e,t,r){var n,i,s,o,a;if("function"==typeof t&&(r=t,t=null),s=this.listenerMap,!e){for(a in s)s.hasOwnProperty(a)&&this.off(a,t,r);return this}if(o=s[e],!o||!o.length)return this;for(n=o.length-1;n>=0;n--)i=o[n],t&&t!==i.selector||r&&r!==i.handler||o.splice(n,1);return o.length||(delete s[e],this.rootElement&&this.rootElement.removeEventListener(e,this.handle,this.captureForType(e))),this},r.prototype.handle=function(e){var t,r,n,i,s,o,a,l="ftLabsDelegateIgnore";if(e[l]!==!0)for(a=e.target,a.nodeType===Node.TEXT_NODE&&(a=a.parentNode),n=this.rootElement,o=this.listenerMap[e.type],r=o.length;a&&r;){for(t=0;r>t&&(i=o[t],i);t++)if(i.matcher.call(a,i.matcherParam,a)&&(s=this.fire(e,a,i)),s===!1)return e[l]=!0,void 0;if(a===n)break;r=o.length,a=a.parentElement}},r.prototype.fire=function(e,t,r){var n,i;return null!==r.eventData?(i=e.data,e.data=r.eventData,n=r.handler.call(t,e,t),e.data=i):n=r.handler.call(t,e,t),n},r.prototype.matches=function(e){if(e){var t=e.prototype;return t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector}}(HTMLElement),r.prototype.matchesTag=function(e,t){return e===t.tagName},r.prototype.matchesRoot=function(e,t){return this.rootElement===t},r.prototype.matchesId=function(e,t){return e===t.id},r.prototype.destroy=function(){this.off(),this.root()}},{}],6:[function(e,t){"use strict";var r=e("./delegate");t.exports=function(e){return new r(e)},t.exports.Delegate=r},{"./delegate":5}],7:[function(e,t){!function(e,r){"undefined"!=typeof t?t.exports=r():"function"==typeof define&&"object"==typeof define.amd?define(r):this[e]=r()}("domready",function(e){function t(e){for(f=1;e=n.shift();)e()}var r,n=[],i=!1,s=document,o=s.documentElement,a=o.doScroll,l="DOMContentLoaded",u="addEventListener",c="onreadystatechange",h="readyState",p=a?/^loaded|^c/:/^loaded|c/,f=p.test(s[h]);return s[u]&&s[u](l,r=function(){s.removeEventListener(l,r,i),t()},i),a&&s.attachEvent(c,r=function(){/^c/.test(s[h])&&(s.detachEvent(c,r),t())}),e=a?function(t){self!=top?f?t():n.push(t):function(){try{o.doScroll("left")}catch(r){return setTimeout(function(){e(t)},50)}t()}()}:function(e){f?e():n.push(e)}})},{}],8:[function(e,t){t.exports.create=function(){var e={};e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var t=Object.prototype.toString,r="[object Function]",n="[object Object]";return e.registerHelper=function(r,i,s){if(t.call(r)===n){if(s||i)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,r)}else s&&(i.not=s),this.helpers[r]=i},e.registerPartial=function(r,i){t.call(r)===n?e.Utils.extend(this.partials,r):this.partials[r]=i},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(n,i){var s=i.inverse||function(){},o=i.fn,a=t.call(n);return a===r&&(n=n.call(this)),n===!0?o(this):n===!1||null==n?s(this):"[object Array]"===a?n.length>0?e.helpers.each(n,i):s(this):o(n)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var r=new e.K;return e.K.prototype=null,r},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,r){if(e.logger.level<=t){var n=e.logger.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,r)}}},e.log=function(t,r){e.logger.log(t,r)},e.registerHelper("each",function(n,i){var s,o=i.fn,a=i.inverse,l=0,u="",c=t.call(n);if(c===r&&(n=n.call(this)),i.data&&(s=e.createFrame(i.data)),n&&"object"==typeof n)if(n instanceof Array)for(var h=n.length;h>l;l++)s&&(s.index=l),u+=o(n[l],{data:s});else for(var p in n)n.hasOwnProperty(p)&&(s&&(s.key=p),u+=o(n[p],{data:s}),l++);return 0===l&&(u=a(this)),u}),e.registerHelper("if",function(n,i){var s=t.call(n);return s===r&&(n=n.call(this)),!n||e.Utils.isEmpty(n)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,r){return e.helpers["if"].call(this,t,{fn:r.inverse,inverse:r.fn})}),e.registerHelper("with",function(n,i){var s=t.call(n);return s===r&&(n=n.call(this)),e.Utils.isEmpty(n)?void 0:i.fn(n)}),e.registerHelper("log",function(t,r){var n=r.data&&null!=r.data.level?parseInt(r.data.level,10):1;e.log(n,t)}),e}},{}],9:[function(e,t,r){r.attach=function(e){return e.VM={template:function(t){var r={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,r,n){var i=this.programs[t];return n?i=e.VM.program(t,r,n):i||(i=this.programs[t]=e.VM.program(t,r)),i},merge:function(t,r){var n=t||r;return t&&r&&(n={},e.Utils.extend(n,r),e.Utils.extend(n,t)),n},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var s=t.call(r,e,n,i.helpers,i.partials,i.data),o=r.compilerInfo||[],a=o[0]||1,l=e.COMPILER_REVISION;if(a!==l){if(l>a){var u=e.REVISION_CHANGES[l],c=e.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+u+") or downgrade your runtime to an older version ("+c+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,r){var n=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||r].concat(n))};return i.program=e,i.depth=n.length,i},program:function(e,t,r){var n=function(e,n){return n=n||{},t(e,n.data||r)};return n.program=e,n.depth=0,n},noop:function(){return""},invokePartial:function(t,r,n,i,s,o){var a={helpers:i,partials:s,data:o};if(void 0===t)throw new e.Exception("The partial "+r+" could not be found");if(t instanceof Function)return t(n,a);if(e.compile)return s[r]=e.compile(t,{data:void 0!==o}),s[r](n,a);throw new e.Exception("The partial "+r+" could not be compiled when running in runtime-only mode")}},e.template=e.VM.template,e}},{}],10:[function(e,t,r){r.attach=function(e){var t=Object.prototype.toString,r=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;t<r.length;t++)this[r[t]]=e[r[t]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,s=/[&<>"'`]/,o=function(e){return n[e]||"&amp;"};return e.Utils={extend:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():null==t||t===!1?"":(t=t.toString(),s.test(t)?t.replace(i,o):t)},isEmpty:function(e){return e||0===e?"[object Array]"===t.call(e)&&0===e.length?!0:!1:!0}},e}},{}],11:[function(e,t){var r=e("handlebars/lib/handlebars/base"),n=e("handlebars/lib/handlebars/utils"),i=e("handlebars/lib/handlebars/runtime"),s=r.create();n.attach(s),i.attach(s),t.exports=s},{"handlebars/lib/handlebars/base":8,"handlebars/lib/handlebars/runtime":9,"handlebars/lib/handlebars/utils":10}],12:[function(e,t){!function(e){e(function(){function e(e,t){for(var r in t)e[r]=t[r];return e}function t(e,t,r){e.attachEvent?(e["e"+t+r]=r,e[t+r]=function(){e["e"+t+r](window.event)},e.attachEvent("on"+t,e[t+r])):e.addEventListener(t,r,!1)}function r(e,t,r){e.detachEvent?(e.detachEvent("on"+t,e[t+r]),e[t+r]=null):e.removeEventListener(t,r,!1)}var n=function(){this.handlers=[];var e=this,t=this.checkUrl;this.checkUrl=function(){t.apply(e,arguments)},"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},i=/^[#\/]|\s+$/g,s=/^\/+|\/+$/g,o=/msie [\w.]+/,a=/\/$/,l=/[?#].*$/;return n.started=!1,e(n.prototype,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var r=this.root.replace(a,"");e.indexOf(r)||(e=e.slice(r.length))}else e=this.getHash();return e.replace(i,"")},start:function(r){if(n.started)throw new Error("LocationBar has already been started");n.started=!0,this.options=e({root:"/"},r),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var a=this.getFragment(),l=document.documentMode,u=o.exec(navigator.userAgent.toLowerCase())&&(!l||7>=l);this.root=("/"+this.root+"/").replace(s,"/"),u&&this._wantsHashChange&&(this.iframe=document.createElement("iframe"),this.iframe.setAttribute("src","javascript:0"),this.iframe.setAttribute("tabindex",-1),this.iframe.style.display="none",document.body.appendChild(this.iframe),this.iframe=this.iframe.contentWindow,this.navigate(a)),this._hasPushState?t(window,"popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!u?t(window,"hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=a;var c=this.location,h=c.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!h)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&h&&c.hash&&(this.fragment=this.getHash().replace(i,""),this.history.replaceState({},document.title,this.root+this.fragment+c.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){r(window,"popstate",this.checkUrl),r(window,"hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),n.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl(),void 0)},loadUrl:function(e){e=this.fragment=this.getFragment(e);for(var t=0,r=this.handlers.length;r>t;t++){var n=this.handlers[t];if(n.route.test(e))return n.callback(e),!0}return!1},navigate:function(e,t){if(!n.started)return!1;t&&t!==!0||(t={trigger:!!t});var r=this.root+(e=this.getFragment(e||""));if(e=e.replace(l,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==r&&(r=r.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,r){if(r){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),n.prototype.update=function(){this.navigate.apply(this,arguments)},n.prototype.onChange=function(e){this.route(/^(.*?)$/,e)},n.prototype.hasPushState=function(){if(!n.started)throw new Error("only available after locationBar.start()");return this._hasPushState},n})}("function"==typeof define&&define.amd?define:function(r){t.exports=r(e)})},{}],13:[function(require,module,exports){!function(e,t,r){"undefined"!=typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define(r):t[e]=r()}("reqwest",this,function(){function handleReadyState(e,t,r){return function(){return e._aborted?r(e.request):(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,twoHundo.test(e.request.status)?t(e.request):r(e.request)),void 0)}}function setHeaders(e,t){var r,n=t.headers||{};n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"],t.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&"setRequestHeader"in e&&e.setRequestHeader(r,n[r])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,r,n){var i=uniqid++,s=e.jsonpCallback||"callback",o=e.jsonpCallbackName||reqwest.getcallbackPrefix(i),a=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),l=n.match(a),u=doc.createElement("script"),c=0,h=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?n=n.replace(a,"$1="+o):o=l[3]:n=urlappend(n,s+"="+o),win[o]=generalCallback,u.type="text/javascript",u.src=n,u.async=!0,"undefined"==typeof u.onreadystatechange||h||(u.event="onclick",u.htmlFor=u.id="_reqwest_"+i),u.onload=u.onreadystatechange=function(){return u[readyState]&&"complete"!==u[readyState]&&"loaded"!==u[readyState]||c?!1:(u.onload=u.onreadystatechange=null,u.onclick&&u.onclick(),t(lastValue),lastValue=void 0,head.removeChild(u),c=1,void 0)},head.appendChild(u),{abort:function(){u.onload=u.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(u),c=1}}}function getRequest(e,t){var r,n=this.o,i=(n.method||"GET").toUpperCase(),s="string"==typeof n?n:n.url,o=n.processData!==!1&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,a=!1;return"jsonp"!=n.type&&"GET"!=i||!o||(s=urlappend(s,o),o=null),"jsonp"==n.type?handleJsonp(n,e,t,s):(r=xhr(n),r.open(i,s,n.async===!1?!1:!0),setHeaders(r,n),setCredentials(r,n),win[xDomainRequest]&&r instanceof win[xDomainRequest]?(r.onload=e,r.onerror=t,r.onprogress=function(){},a=!0):r.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(r),a?setTimeout(function(){r.send(o)},200):r.send(o),r)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){var t=e.match(/\.(json|jsonp|html|xml)(\?|$)/);return t?t[1]:"js"}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(e,t,r){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,r);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var r,n,i,s,o=e.name,a=e.tagName.toLowerCase(),l=function(e){e&&!e.disabled&&t(o,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&o)switch(a){case"input":/reset|button|image|file/i.test(e.type)||(r=/checkbox/i.test(e.type),n=/radio/i.test(e.type),i=e.value,(!(r||n)||e.checked)&&t(o,normalize(r&&""===i?"on":i)));break;case"textarea":t(o,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())l(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(s=0;e.length&&s<e.length;s++)e.options[s].selected&&l(e.options[s])}}function eachFormElement(){var e,t,r=this,n=function(e,t){var n,i,s;for(n=0;n<t.length;n++)for(s=e[byTag](t[n]),i=0;i<s.length;i++)serial(s[i],r)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,r),n(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,r){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(r)):e[t]=r},arguments),e}function buildParams(e,t,r,n){var i,s,o,a=/\[\]$/;if(isArray(t))for(s=0;t&&s<t.length;s++)o=t[s],r||a.test(e)?n(e,o):buildParams(e+"["+("object"==typeof o?s:"")+"]",o,r,n);else if(t&&"[object Object]"===t.toString())for(i in t)buildParams(e+"["+i+"]",t[i],r,n);else n(e,t)}var win=window,doc=document,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array
},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,r){e.push({name:t,value:r})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,r=Array.prototype.slice.call(arguments,0);return e=r.pop(),e&&e.nodeType&&r.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,r)},reqwest.toQueryString=function(e,t){var r,n,i=t||!1,s=[],o=encodeURIComponent,a=function(e,t){t="function"==typeof t?t():null==t?"":t,s[s.length]=o(e)+"="+o(t)};if(isArray(e))for(n=0;e&&n<e.length;n++)a(e[n].name,e[n].value);else for(r in e)e.hasOwnProperty(r)&&buildParams(r,e[r],i,a);return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},{}],14:[function(e,t){var r=e("hbsfy/runtime");t.exports=r.template(function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,o="",a="function",l=this.escapeExpression;return o+="<h2>",(s=r.title)?s=s.call(t,{hash:{},data:i}):(s=t.title,s=typeof s===a?s.apply(t):s),o+=l(s)+"</h2>"})},{"hbsfy/runtime":11}],15:[function(e,t){function r(e){var t=e.querySelector("#thumbs-container"),r=e.querySelector("#image-container");this.title="",this.header=e.querySelector("#results-header"),this.thumbNails=new n(t),this.viewer=new i(r)}var n=e("./thumbs"),i=e("./viewer"),s=e("./header.hbs");r.prototype.render=function(){this.header.innerHTML=s(this)},r.prototype.displaySearchResults=function(e){this.title=e.title,this.render(),this.thumbNails.render(e.photos),this.thumbNails.on("thumbClicked",this.renderImage.bind(this))},r.prototype.renderImage=function(e){this.viewer.render(e)},t.exports=r},{"./header.hbs":14,"./thumbs":17,"./viewer":19}],16:[function(e,t){function r(e){this.id=e.id,this.meta=e||{farm:"",server:"",secret:""},this.url="http://farm"+this.meta.farm+".staticflickr.com/"+this.meta.server+"/"+this.id+"_"+this.meta.secret,this.thumbUrl=this.url+"_s.jpg",this.fullUrl=this.url+"_z.jpg"}t.exports=r},{}],17:[function(e,t){function r(e){i.call(this),this.element=e,this.photos=[],this.delegate=new n(this.element),this.delegate.on("click",".image-link",function(e){var t=e.target.id,r=this.photos.filter(function(e){return e.id===t});return e.preventDefault(),r.length?(this.emit("thumbClicked",r[0]),void 0):console.err("WAT?!")}.bind(this))}var n=e("dom-delegate"),i=e("events").EventEmitter,s=e("../photo"),o=e("util").inherits,a=e("./thumbs.hbs");o(r,i),r.prototype.render=function(e){this.photos=e.map(function(e){return new s(e)}),this.element.innerHTML=a(this)},t.exports=r},{"../photo":16,"./thumbs.hbs":18,"dom-delegate":6,events:3,util:4}],18:[function(e,t){var r=e("hbsfy/runtime");t.exports=r.template(function(e,t,r,n,i){function s(e,t){var n,i="";return i+='\n			<li>\n				<a href="',(n=r.fullUrl)?n=n.call(e,{hash:{},data:t}):(n=e.fullUrl,n=typeof n===l?n.apply(e):n),i+=u(n)+'" class="image-link">\n					<img src="',(n=r.thumbUrl)?n=n.call(e,{hash:{},data:t}):(n=e.thumbUrl,n=typeof n===l?n.apply(e):n),i+=u(n)+'" id="',(n=r.id)?n=n.call(e,{hash:{},data:t}):(n=e.id,n=typeof n===l?n.apply(e):n),i+=u(n)+'"/>\n			</a>\n		</li>\n	'}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var o,a="",l="function",u=this.escapeExpression,c=this;return a+='<ul class="large-block-grid-4">\n		',o=r.each.call(t,t.photos,{hash:{},inverse:c.noop,fn:c.program(1,s,i),data:i}),(o||0===o)&&(a+=o),a+="\n</ul>"})},{"hbsfy/runtime":11}],19:[function(e,t){function r(e){this.element=e,this.photo}var n=e("./viewer.hbs");r.prototype.render=function(e){this.photo=e,this.element.innerHTML=n(this.photo)},t.exports=r},{"./viewer.hbs":20}],20:[function(e,t){var r=e("hbsfy/runtime");t.exports=r.template(function(e,t,r,n,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{};var s,o="",a="function",l=this.escapeExpression;return o+='<img src="',(s=r.fullUrl)?s=s.call(t,{hash:{},data:i}):(s=t.fullUrl,s=typeof s===a?s.apply(t):s),o+=l(s)+'" />'})},{"hbsfy/runtime":11}],21:[function(e,t){var r=e("location-bar");t.exports=new r},{"location-bar":12}],22:[function(e,t){function r(e){i.call(this),this.element=e,this.term="",this.render(),this.delegate=new n(this.element),this.delegate.on("click",".search-button",this.onSearchClicked.bind(this)),this.delegate.on("blur",".search-term",this.onTermEntered.bind(this)),this.searchFailed=!1}var n=e("dom-delegate"),i=e("events").EventEmitter,s=e("util").inherits,o=e("./search.hbs"),a=e("reqwest"),l="934910a2c34c06b6b167e1589069c274",u="http://api.flickr.com/services/rest/?&api_key="+l;urlSuffix="&format=json&nojsoncallback=1",s(r,i),r.prototype.render=function(){this.element.innerHTML=o(this)},r.prototype.onTermEntered=function(e){var t=e.target.value;this.term=t||""},r.prototype.search=function(e){var t;e&&(this.term=e,t=u+"&method=flickr.tags.getClusterPhotos&tag="+this.term+urlSuffix,a({url:t,method:"get",type:"json",crossOrigin:!0,success:function(e){return e.photos.photo.length?(this.emit("searchReturned",{title:this.term,photos:e.photos.photo}),void 0):(this.searchFailed=!0,void 0)}.bind(this),error:function(e){console.log(e)}}))},r.prototype.onSearchClicked=function(){this.term&&(this.search(this.term),this.emit("searchClicked",this.term))},t.exports=r},{"./search.hbs":23,"dom-delegate":6,events:3,reqwest:13,util:4}],23:[function(e,t){var r=e("hbsfy/runtime");t.exports=r.template(function(e,t,r,n,i){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),i=i||{},'<div class="small-12 columns">\n	<div class="row collapse">\n		<div class="small-10 columns">\n			<input type="text" class="search-term"/>\n		</div>\n		<div class="small-2 columns">\n			<button class="search-button button prefix">Search</button>\n		</div>\n	</div>\n</div>'})},{"hbsfy/runtime":11}]},{},[1]);